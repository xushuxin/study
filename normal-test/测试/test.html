<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">

  <title></title>

</head>

<body>

  <button onclick="download()">点击按钮下载</button>
  <button onclick="download2()">点击按钮下载2</button>
  <button onclick="download3()">点击按钮下载3</button>



  <script>
    // 直接下载，用户体验好

    function download() {
      var $a = document.createElement('a');
      $a.setAttribute("href", '/normal-test/%E6%B5%8B%E8%AF%95/test.js');
      $a.setAttribute("download", "");
      var evObj = document.createEvent('MouseEvents');
      evObj.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, true, false, 0, null);
      $a.dispatchEvent(evObj);
    };
    // 会打开一个空白页下载，然后空白页消失，用户体验不好

    function download2() {

      window.open('/normal-test/%E6%B5%8B%E8%AF%95/test.js');

    }



    // 直接下载，用户体验好

    function download3() {
      var $form = $('<form method="GET"></form>');

      $form.attr('action', '/normal-test/%E6%B5%8B%E8%AF%95/test.js');

      $form.appendTo($('body'));

      $form.submit();

    }
  </script>

</body>

</html>