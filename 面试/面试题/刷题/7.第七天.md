##### 1，v-if和v-for为什么不能连用？

v-for比v-if优先，如果每一次都需要遍历整个数组，将会影响速度，尤其是当需要渲染很小一部分的时候 。可以采取多层包裹来解决性能损耗问题。例如外层给标签绑定指令v-if或者是内层标签绑定v-if

Vue2中   v-for优先级高  
Vue3中  v-if优先级高

##### 2，单页面应用和多页面应用区别及优缺点?

单页应用：
优点：

1、用户体验好

2、速度快

3、内容改变不需要重新加载整个页面

4、对服务器压力小

缺点：

1、不利于SEO

2、需要自己实现路由导航

3、初次加载耗时长

4、页面复杂度提高

多页面应用：  
优点 ：
 1、多页面应用对于 seo更加友好。
 2、更容易扩展。
 3、更易的数据分析。  
缺点：
 1、程序开发成本高。
 2、增加服务端压力，多页面会不停的加载。
 3、用户体验相对较差。

##### 3，v-model 该如何实现？

v-model本质上是v-on和v-bind的语法糖。

要实现v-model的话，首先我们必须要有把数据解析到视图里的能力

我们可以先获取app  然后尝试着自己去解析里面的内容

![image-20210513062425182](/Users/xushuxin/Library/Application Support/typora-user-images/image-20210513062425182.png)

其实就是直接获取所有子元素,遇见字符串呢，那就字符串解析，遇见节点，那就直接递归

![image-20210513062521117](/Users/xushuxin/Library/Application Support/typora-user-images/image-20210513062521117.png)

然后解析替换这块就没啥问题了,这里面核心就是正则，然后替换就可以了

然后接下来呢，需要实现一下动态更新视图，也就是数据的变化，需要可以引起视图的变化

这个功能需要两块内容   第一个是 Proxy 这个估计大家都知道

第二个就是通知机制了  我这里的话是用了自定义事件  CustomEvent

先看 Proxy
![image-20210513062728627](/Users/xushuxin/Library/Application Support/typora-user-images/image-20210513062728627.png)

其实也算简单，就只是把所有数据传进来，然后做一个set监听就可以了

然后在这里面用到了自定义事件   直接在set 方法里派发，派发的事件名称就是数据的名称

派发之后 在compile里面监听

![image-20210513063231301](/Users/xushuxin/Library/Application Support/typora-user-images/image-20210513063231301.png)

这里面  $2其实就是匹配到的字符串里面{{}}里面的内容

也就和前面 set 方法里面的 派发的事件名称对应上了

一旦数据的 set 方法被触发，那么通过自定义事件就会传达到这里面   引起新一轮的解析
这样的话页面也就及时更新了

这最后一步其实就是判断元素节点身上是不是包含有 v-model这个属性，如果有，那么就监听它对应的方法  做出相应的处理

![image-20210513063857963](/Users/xushuxin/Library/Application Support/typora-user-images/image-20210513063857963.png)

这里只是监听了一个input事件，实际上Vue里面的话  根据不同的元素会监听不同的事件

比如：text 和 textarea 元素使用 value 属性和 input 事件；checkbox 和 radio 使用 checked 属性和 change 事件；select 字段将 value 作为 prop 并将 change 作为事件。

这里面的话其实还可以做拓展    首先，HTML内容其实是可以放在 template 这个标签里面的，然后通过自定义元素放到页面当中去

![image-20210513064111055](/Users/xushuxin/Library/Application Support/typora-user-images/image-20210513064111055.png)

直接把html内容像 Vue文件那样放在js文件里，然后通过 customElements 就可以做一个自定义元素

自定义元素可以看这一段

![image-20210513064340841](/Users/xushuxin/Library/Application Support/typora-user-images/image-20210513064340841.png)

需要注意的是，自定义元素必须包含中划线 - 
然后所有字母都需要小写

然后还需要一个类，来定义这个元素的所有方法和行为  

这个类需要继承 HTMLElement

那么在这个类里面我们就可以去做所有的事情了

比如刚才说的节点解析呀，事件呀之类的都可以往上面去增加

自定义元素：https://juejin.cn/post/6893880467305529352