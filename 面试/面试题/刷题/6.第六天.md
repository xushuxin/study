##### 一、节流和防抖分别是什么？在什么场景下使用？请分别实现一个节流函数和一个防抖函数

防抖的核心思想就是：当用户高频率多次触发某个事件的时候，出于性能考虑，只执行一次函数

防抖的话可以分为头部执行和尾部执行   

头部执行：连续点击多次，只有第一次会真正触发函数，后面的都不会触发
尾部执行：连续点击多次，只有最后一次会触发函数

![47131620728210_.pic](/Users/xushuxin/Library/Containers/com.tencent.xinWeChat/Data/Library/Application Support/com.tencent.xinWeChat/2.0b4.0.9/7f7c8ceeaf6c9722c6000c82557e7968/Message/MessageTemp/727e40fd3d05c1777eb165c578b9cc36/Image/47131620728210_.pic.jpg)

头部执行

![47231620728423_.pic](/Users/xushuxin/Library/Containers/com.tencent.xinWeChat/Data/Library/Application Support/com.tencent.xinWeChat/2.0b4.0.9/7f7c8ceeaf6c9722c6000c82557e7968/Message/MessageTemp/727e40fd3d05c1777eb165c578b9cc36/Image/47231620728423_.pic.jpg)

写个小案例：

##### ![47261620728562_.pic_hd](/Users/xushuxin/Library/Containers/com.tencent.xinWeChat/Data/Library/Application Support/com.tencent.xinWeChat/2.0b4.0.9/7f7c8ceeaf6c9722c6000c82557e7968/Message/MessageTemp/727e40fd3d05c1777eb165c578b9cc36/Image/47261620728562_.pic_hd.jpg)

节流的核心思想：控制事件的触发频率，让它的频率变得可控

实现：

![image-20210512070515951](/Users/xushuxin/Library/Application Support/typora-user-images/image-20210512070515951.png)

##### 二、怎么禁止让js读取cookie？怎么让cookie只在HTTPS下传输？

由于cookie会存放在客户端，一般情况下会保存一些凭证及状态信息，为了防止cookie泄露造成安全问题。cookie的 HttpOnly属性，通过程序(JS脚本、Applet等)将无法读取到Cookie信息，这样能有效的防止XSS攻击。

cookie 中有个属性Secure，当添加该属性时，表示创建的 Cookie 只会在 HTTPS 请求中被传递到服务器端，如果是 HTTP 连接则不会传递该cookie信息，所以不会被窃取到Cookie 的具体内容（但是这种Cookie可以访问硬盘的人，可以读取它）。

##### 三、什么是 XSS 攻击？如何防范 XSS 攻击？

1.反射型

反射型 XSS 一般是攻击者通过特定手法（如电子邮件），诱使用户去访问一个包含恶意代码的 URL，当受害者点击这些专门设计的链接的时候，恶意代码会直接在受害者主机上的浏览器执行。

对于访问者而言是一次性的，具体表现在我们把我们的恶意脚本通过 URL 的方式传递给了服务器，而服务器则只是不加处理的把脚本“反射”回访问者的浏览器而使访问者的浏览器执行相应的脚本。反射型 XSS 的触发有后端的参与，要避免反射性 XSS，必须需要后端的协调，后端解析前端的数据时首先做相关的字串检测和转义处理。

此类 XSS 通常出现在网站的搜索栏、用户登录口等地方，常用来窃取客户端 Cookies 或进行钓鱼欺骗。

2.DOM-based 型

客户端的脚本程序可以动态地检查和修改页面内容，而不依赖于服务器端的数据。例如客户端如从 URL 中提取数据并在本地执行，如果用户在客户端输入的数据包含了恶意的 JavaScript 脚本，而这些脚本没有经过适当的过滤和消毒，那么应用程序就可能受到 DOM-based XSS 攻击。需要特别注意以下的用户输入源 document.URL、 location.hash、 location.search、 document.referrer 等。

3.存储型

攻击者事先将恶意代码上传或储存到漏洞服务器中，只要受害者浏览包含此恶意代码的页面就会执行恶意代码。这就意味着只要访问了这个页面的访客，都有可能会执行这段恶意脚本，因此储存型XSS的危害会更大。

存储型 XSS 一般出现在网站留言、评论、博客日志等交互处，恶意脚本存储到客户端或者服务端的数据库中。